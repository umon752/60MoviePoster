{"version":3,"sources":["webpack:///./src/views/Dashboard/Layout.vue","webpack:///./src/views/Dashboard/Layout.vue?bf04"],"names":["class","ref","src","data-cursor","isShowSidebar","sidebarHide","to","changeTitle","toggle","href","signOut","title","isToggleHam","checkSuccess","emptyState","data","inject","methods","state","this","$refs","outer","classList","add","remove","window","screen","width","sidebarShow","text","checkLogin","token","document","cookie","replace","$http","defaults","headers","common","Authorization","url","post","then","res","success","$alertState","$router","push","emit","isLoading","userData","catch","mounted","setTimeout","isOpening","render"],"mappings":"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","file":"js/chunk-2d0f0c42.105ff96a.js","sourcesContent":["<template>\n  <div\n    class=\"mask\"\n    :class=\"{ active: isShowSidebar }\"\n    @click=\"sidebarHide\"\n  ></div>\n  <div class=\"d-flex\" ref=\"outer\">\n    <!-- sidebar -->\n    <aside\n      class=\"adminSidebar border-end p-4 p-md-6\"\n      :class=\"{ active: isShowSidebar }\"\n    >\n      <div class=\"position-relative h-100\">\n        <h1 class=\"mb-6\">\n          <router-link to=\"/admin/products\" class=\"logo\"\n          @click=\"changeTitle('PRODUCTS'), toggle()\">\n            <div class=\"d-flex position-relative h-100 h-md-auto\">\n              <img\n                class=\"logo__6\"\n                src=\"@/assets/images/logo/logo_6.svg\"\n                data-cursor=\"cursor\"\n              />\n              <img\n                class=\"logo__0\"\n                src=\"@/assets/images/logo/logo_0.svg\"\n                data-cursor=\"cursor\"\n              />\n              <div class=\"logo__text\" data-cursor=\"cursor\">60 Movie Poster</div>\n            </div>\n          </router-link>\n        </h1>\n        <ul>\n          <li class=\"mb-4\">\n            <router-link\n              to=\"/admin/products\"\n              class=\"link-primary d-flex align-items-center\"\n              @click=\"changeTitle('PRODUCTS'), toggle()\"\n            >\n              <span class=\"material-icons me-2\"> shopping_bag </span>\n              PRODUCTS\n            </router-link>\n          </li>\n          <li class=\"mb-4\">\n            <router-link\n              to=\"/admin/orders\"\n              class=\"link-primary d-flex align-items-center\"\n              @click=\"changeTitle('ORDERS'), toggle()\"\n            >\n              <span class=\"material-icons me-2\"> receipt_long </span>\n              ORDERS\n            </router-link>\n          </li>\n          <li class=\"mb-4\">\n            <router-link\n              to=\"/admin/coupons\"\n              class=\"link-primary d-flex align-items-center\"\n              @click=\"changeTitle('COUPONS'), toggle()\"\n            >\n              <span class=\"material-icons me-2\"> confirmation_number </span>\n              COUPONS\n            </router-link>\n          </li>\n          <li class=\"mb-4\">\n            <router-link\n              to=\"/admin/articles\"\n              class=\"link-primary d-flex align-items-center\"\n              @click=\"changeTitle('ARTICLES'), toggle()\"\n            >\n              <span class=\"material-icons me-2\"> article </span>\n              ARTICLES\n            </router-link>\n          </li>\n        </ul>\n        <a\n          href=\"#\"\n          class=\"\n            adminSidebar__item\n            link-primary\n            d-flex\n            align-items-center\n            opacity-70\n          \"\n          @click.prevent=\"signOut()\"\n        >\n          <span class=\"material-icons me-2\"> logout </span>\n          SIGN OUT\n        </a>\n      </div>\n    </aside>\n\n    <section class=\"adminContent d-flex flex-column p-4 p-md-6 px-xl-7\">\n      <!-- navbar -->\n      <nav\n        class=\"d-flex justify-content-between align-items-center mb-5 mb-lg-5\"\n      >\n        <h2 class=\"title\">{{ title }}</h2>\n        <!-- mobile、pad -->\n        <a\n          href=\"#\"\n          class=\"hamToggle d-block d-xl-none\"\n          :class=\"{ active: isToggleHam }\"\n          @click.prevent=\"toggle\"\n        ></a>\n        <!-- desktop -->\n        <ul class=\"align-items-center d-none d-xl-flex\">\n          <li class=\"position-relative me-3\">\n            <a href=\"#\" class=\"link px-3\" @click.prevent>\n              <span class=\"material-icons\"> notifications </span>\n              <span class=\"point\">3</span>\n            </a>\n          </li>\n          <li class=\"position-relative\">\n            <a href=\"#\" class=\"avatar d-block\" @click.prevent>\n              <img class=\"avatar__img\" src=\"https://i.imgur.com/Jcnq7qG.jpg\" />\n            </a>\n          </li>\n        </ul>\n      </nav>\n      <!-- content -->\n      <router-view v-if=\"checkSuccess\" @emptyState=\"emptyState\" />\n    </section>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/mitt';\n\nexport default {\n  data() {\n    return {\n      isToggleHam: false,\n      isShowSidebar: false,\n      title: 'PRODUCTS',\n      checkSuccess: false,\n    };\n  },\n  inject: ['emitter', '$alertState'],\n  methods: {\n    emptyState(state) {\n      if (state) {\n        this.$refs.outer.classList.add('vh-100');\n      } else {\n        this.$refs.outer.classList.remove('vh-100');\n      }\n    },\n    toggle() {\n      if (window.screen.width < 1200) {\n        if (!this.isShowSidebar) {\n          this.isShowSidebar = true;\n          this.isToggleHam = true;\n        } else {\n          this.isShowSidebar = false;\n          this.isToggleHam = false;\n        }\n      }\n    },\n    sidebarShow() {\n      this.isShowSidebar = true;\n      this.isToggleHam = true;\n    },\n    sidebarHide() {\n      this.isShowSidebar = false;\n      this.isToggleHam = false;\n    },\n    changeTitle(text) {\n      this.title = text;\n    },\n    checkLogin() {\n      // 取出儲存在瀏覽器 cookie 裡面的 token 憑證\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n      // 確認有 token 執行\n      if (token) {\n        // 將 token 加入在 headers 內\n        this.$http.defaults.headers.common.Authorization = token;\n        // 檢查用戶是否仍持續登入\n        const url = `${process.env.VUE_APP_API}/api/user/check`;\n        this.$http.post(url).then((res) => {\n          if (res.data.success) {\n            // 確認用戶有登入 -> 顯示 router-view 內容\n            this.checkSuccess = true;\n          } else {\n            // 顯示訊息\n            this.$alertState(res.data.success, 'Login');\n            // 轉址到 /login\n            this.$router.push('/login');\n          }\n        });\n      } else {\n        // 顯示訊息\n        this.$alertState(false, 'Login');\n        // 轉址到 /login\n        this.$router.push('/login');\n      }\n    },\n    signOut() {\n      const url = `${process.env.VUE_APP_API}/logout`;\n      // 顯示 loading\n      emitter.emit('isLoading', this.isLoading = true);\n      this.$http\n        .post(url, this.userData)\n        .then((res) => {\n          if (res.data.success) {\n            // 清除 cookie\n            document.cookie = 'hexToken=; expires=; path=/60MoviePoster/dist';\n            // 轉址到 /admin\n            this.$router.push('/login');\n          } else {\n            // 顯示訊息\n            this.$alertState(res.data.success, 'Sign out');\n          }\n          // 隱藏 loading\n          emitter.emit('isLoading', this.isLoading = false);\n        })\n        .catch(() => {\n          // 顯示訊息\n          this.$alertState('error');\n        });\n    },\n  },\n  mounted() {\n    this.checkLogin();\n    // 隱藏 opening\n    setTimeout((() => {\n      emitter.emit('isOpening', this.isOpening = true);\n    }), 1300);\n  },\n};\n</script>\n","import { render } from \"./Layout.vue?vue&type=template&id=442f5ef8\"\nimport script from \"./Layout.vue?vue&type=script&lang=js\"\nexport * from \"./Layout.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}