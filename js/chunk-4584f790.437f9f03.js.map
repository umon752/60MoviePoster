{"version":3,"sources":["webpack:///./src/views/Payment.vue","webpack:///./src/views/Payment.vue?6c4e","webpack:///./src/components/Spinner.vue","webpack:///./src/components/Spinner.vue?6ee1","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","ref","id","tabindex","aria-labelledby","aria-hidden","orderData","products","item","key","src","product","imageUrl","title","qty","$filters","thousands","price","total","user","email","name","tel","address","type","openCheckModal","payment","cancelOrder","isSpinner","inheritAttrs","data","checkModal","emits","methods","getOrder","this","$route","params","url","emit","isLoading","$http","get","then","res","success","order","$alertState","catch","post","$router","push","show","hide","mounted","$refs","$emit","components","Spinner","render","role","script","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"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","file":"js/chunk-4584f790.437f9f03.js","sourcesContent":["<template>\n  <section class=\"container pb-9 pt-3\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-xl-9\">\n        <div class=\"d-flex flex-wrap justify-content-between mb-6\">\n          <h2 class=\"title mb-5 mb-md-0\">PAYMENT</h2>\n          <ul class=\"d-flex w-100 w-md-auto\">\n            <li\n              class=\"\n                cartStep\n                text-center\n                bg-black-opacity-50\n                border border-dark\n                fs-6 fs-sm-5\n                py-2 py-md-0\n              \"\n            >\n              STEP 1<br />CART\n            </li>\n            <li\n              class=\"\n                cartStep\n                text-center\n                bg-black-opacity-50\n                border border-dark\n                fs-6 fs-sm-5\n                py-2 py-md-0\n              \"\n            >\n              STEP 2<br />ORDER\n            </li>\n            <li\n              class=\"\n                cartStep\n                text-center\n                bg-black-opacity-50\n                border border-dark\n                fs-6 fs-sm-5\n                active\n                py-2 py-md-0\n              \"\n            >\n              STEP 3<br />PAYMENT\n            </li>\n          </ul>\n        </div>\n        <div class=\"bg-black-opacity-50 px-5 py-6 p-md-6 p-lg-7 mt-2\">\n          <ul class=\"row border-top border-bottom py-4 mx-0\">\n            <li class=\"col-6 fw-bold d-none d-md-block\">NAME</li>\n            <li class=\"col-3 text-center fw-bold d-none d-md-block\">QTY</li>\n            <li class=\"col-3 fw-bold d-none d-md-block\">PRICE</li>\n            <li class=\"col-3 fw-bold text-center w-100 d-md-none\">PRODUCT</li>\n          </ul>\n          <ul\n            class=\"row align-items-center border-bottom py-5 mx-0\"\n            v-for=\"item in orderData.products\"\n            :key=\"item.id\"\n          >\n            <li class=\"col-5 col-md-3 d-flex align-items-center\">\n              <div class=\"product overflow-hidden position-relative\">\n                <img class=\"product__img\" :src=\"item.product.imageUrl\" />\n              </div>\n            </li>\n            <li class=\"col-7 col-md-9\">\n              <ul class=\"row\">\n                <li class=\"col-md-4\">\n                  <p>{{ item.product.title }}</p>\n                </li>\n                <li\n                  class=\"\n                    col-md-4\n                    d-flex\n                    justify-content-md-center\n                    align-items-center\n                  \"\n                >\n                  <span>{{ item.qty }}</span>\n                </li>\n                <li\n                  class=\"\n                    col-md-4\n                    d-flex\n                    justify-content-md-between\n                    align-items-center\n                  \"\n                >\n                  <p class=\"lh-lg me-3 me-md-0\">\n                    NT$ {{ $filters.thousands(item.product.price) }}\n                  </p>\n                </li>\n              </ul>\n            </li>\n          </ul>\n          <div class=\"d-flex justify-content-end py-5 mb-6 mb-lg-7\">\n            <p class=\"text-primary fw-bold fs-5 fs-md-4 pe-5\">TOTAL</p>\n            <p class=\"text-primary fw-bold\">\n              NT$ {{ $filters.thousands(orderData.total) }}\n            </p>\n          </div>\n          <ul class=\"border-top mb-6 mb-lg-8\" v-if=\"orderData.user\">\n            <li class=\"fw-bold border-bottom py-4\">\n              <span class=\"w-40 w-sm20 d-inline-block\">EMAIL</span>\n              <span class=\"fw-normal\">{{ orderData.user.email }}</span>\n            </li>\n            <li class=\"fw-bold border-bottom py-4\">\n              <span class=\"w-40 w-sm20 d-inline-block\">NAME</span>\n              <span class=\"fw-normal\">{{ orderData.user.name }}</span>\n            </li>\n            <li class=\"fw-bold border-bottom py-4\">\n              <span class=\"w-40 w-sm20 d-inline-block\">TEL</span>\n              <span class=\"fw-normal\">{{ orderData.user.tel }}</span>\n            </li>\n            <li class=\"fw-bold border-bottom py-4\">\n              <span class=\"w-40 w-sm20 d-inline-block\">ADDRESS</span>\n              <span class=\"fw-normal\">{{ orderData.user.address }}</span>\n            </li>\n          </ul>\n          <div class=\"d-flex flex-column flex-md-row justify-content-center\">\n            <button\n            type=\"button\"\n              class=\"\n                btn btn-secondary\n                text-white\n                w-100 w-md-40 w-lg-25\n                me-3\n                mb-3 mb-md-0\n              \"\n              @click=\"openCheckModal\"\n            >\n              CANCEL ORDER\n            </button>\n            <button\n              type=\"button\"\n              @click=\"payment(orderData.id)\"\n              class=\"btn btn-primary w-100 w-md-40 w-lg-25\"\n            >\n              PROCEED TO PAYMENT\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n  <!-- check modal -->\n<div\n    ref=\"checkModal\"\n    class=\"modal fade\"\n    id=\"check\"\n    tabindex=\"-1\"\n    aria-labelledby=\"checkLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h3 class=\"modal-title title fs-3\" id=\"checkLabel\">\n            CANCEL ORDER\n          </h3>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <p class=\"text-break mb-1\">\n            Do you want to cancel this order?\n          </p>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-sm btn-primary d-flex\"\n            @click=\"cancelOrder\"\n          >\n            <Spinner v-if=\"isSpinner\" />\n            CANCEL ORDER\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/mitt';\nimport Modal from 'bootstrap/js/dist/modal';\nimport Spinner from '@/components/Spinner.vue';\n\nexport default {\n  inheritAttrs: false,\n  data() {\n    return {\n      orderData: {},\n      checkModal: '',\n      isSpinner: false,\n    };\n  },\n  emits: ['delAllCartData'],\n  methods: {\n    getOrder() {\n      const { id } = this.$route.params;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${id}`;\n      // 顯示 loading\n      emitter.emit('isLoading', (this.isLoading = true));\n      this.$http\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.orderData = res.data.order;\n          } else {\n          // 顯示訊息\n            this.$alertState(res.data.success, 'Get order');\n          }\n          // 隱藏 loading\n          emitter.emit('isLoading', (this.isLoading = false));\n        })\n        .catch(() => {\n          // 顯示訊息\n          this.$alertState('error');\n        });\n    },\n    payment(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/pay/${id}`;\n      // 顯示 loading\n      emitter.emit('isLoading', (this.isLoading = true));\n      this.$http\n        .post(url)\n        .then((res) => {\n          if (res.data.success) {\n            // 轉址到 /complete\n            this.$router.push(`/complete/${id}`);\n          } else {\n          // 顯示訊息\n            this.$alertState(res.data.success, 'Payment');\n          }\n          // 隱藏 loading\n          emitter.emit('isLoading', (this.isLoading = false));\n        })\n        .catch(() => {\n          // 顯示訊息\n          this.$alertState('error');\n        });\n    },\n    openCheckModal() {\n      this.checkModal.show();\n    },\n    cancelOrder() {\n      this.isSpinner = true;\n      // 轉址到首頁\n      this.$router.push('/');\n      // 關閉 modal\n      this.checkModal.hide();\n    },\n  },\n  mounted() {\n    this.getOrder();\n    // modal 初始化\n    this.checkModal = new Modal(this.$refs.checkModal);\n    // 清空購物車\n    this.$emit('delAllCartData', []);\n  },\n  components: {\n    Spinner,\n  },\n};\n</script>\n","import { render } from \"./Payment.vue?vue&type=template&id=41527419\"\nimport script from \"./Payment.vue?vue&type=script&lang=js\"\nexport * from \"./Payment.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div\n    class=\"spinner-border spinner-border-sm text-white opacity-70 me-2\"\n    role=\"status\"\n  >\n    <span class=\"visually-hidden\">Loading...</span>\n  </div>\n</template>\n","import { render } from \"./Spinner.vue?vue&type=template&id=776ce61e\"\nconst script = {}\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}